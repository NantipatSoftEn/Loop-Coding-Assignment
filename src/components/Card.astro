---
import type { IRestaurant } from '@/mock/data'
import HeaderLink from './HeaderLink.astro'
import { isOpenOnDay } from '@/pages/api/daysOpen'
import moment from 'moment'
import { getRestaurantStatus } from '@/pages/api/calculate'
interface Props {
  restaurant: IRestaurant
}
const { restaurant } = Astro.props
const currentDay = moment().format('dddd')
---

<div class="col-md-4 mb-4">
  <HeaderLink href=`/restaurants/${restaurant.id}`>
    <div class="card">
      <div class="image-container">
        <img
          src={restaurant.image}
          class="card-img-top"
          alt="Labanoon Concert"
        />
        <div class="image-text">
          <h5 class="card-title">
            {
              getRestaurantStatus(
                restaurant.day,
                restaurant.time.open,
                restaurant.time.close,
                true
              )
            }
          </h5>
          <!-- <p class="card-text">{restaurant.type}</p> -->
        </div>
      </div>
      <div class="card-body">
        <h5 class="card-title">{restaurant.name}</h5>
        <p class="card-text">{restaurant.type}</p>
        <p class="card-text">
          {restaurant.time.open} - {restaurant.time.close}
        </p>
        <p class="card-text">{restaurant.day}</p>
        <!-- <a href="#" class="btn btn-primary">ดูเพิ่มเติม</a> -->
      </div>
    </div>
  </HeaderLink>
</div>

<style>
  .image-container {
    position: relative;
  }

  .card-img-top {
    width: 100%;
    height: auto;
  }

  .image-text {
    position: absolute;
    bottom: 10px;
    left: 10px;
    color: white;
    background-color: rgba(0, 0, 0, 0.5);
    padding: 5px;
    border-radius: 5px;
  }
</style>
